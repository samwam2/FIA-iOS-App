/**
 * PublicKey.js - v0e011cb
 *
 * @source https://github.com/diafygi/publickeyjs/blob/master/publickey.js
 *
 * @licstart  The following is the entire license notice for the
 * JavaScript code in this file.
 *
 * Copyright (c) 2015 Daniel Roesler
 *
 * The JavaScript code in this page is free software: you can
 * redistribute it and/or modify it under the terms of the GNU
 * General Public License (GNU GPL) as published by the Free Software
 * Foundation, either version 3 of the License, or (at your option)
 * any later version.  The code is distributed WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.
 *
 * As additional permission under GNU GPL version 3 section 7, you
 * may distribute non-source (e.g., minimized or compacted) forms of
 * that code without the copy of the GNU GPL normally required by
 * section 4, provided you include this license notice and a URL
 * through which recipients can access the Corresponding Source.
 *
 * @licend  The above is the entire license notice
 * for the JavaScript code in this file.
 */
(function(v){var w=["https://keys.fedoraproject.org/","https://keybase.io/"],q=function(f){this.keyservers=f||w};q.prototype.get=function(f,h,g,c){void 0===g&&(g=0);if(g>=this.keyservers.length)return h(null,c||404);c=this.keyservers[g];var e=this;if(0===c.indexOf("https://keybase.io/")){0===f.indexOf("0x")&&(f=f.substr(2));var b=new XMLHttpRequest;b.open("get","https://keybase.io/_/api/1.0/user/lookup.json?fields=public_keys&key_fingerprint="+f);b.onload=function(){if(200===b.status){var c=JSON.parse(b.responseText);
return 0!==c.status.code?e.get(f,h,g+1,c.status.code):0===c.them.length?e.get(f,h,g+1,404):h(c.them[0].public_keys.primary.bundle,null)}return e.get(f,h,g+1,b.status)}}else 0!==f.indexOf("0x")&&(f="0x"+f),b=new XMLHttpRequest,b.open("get",c+"pks/lookup?op=get&options=mr&search="+f),b.onload=function(){return 200===b.status?h(b.responseText,null):e.get(f,h,g+1,b.status)};b.send()};q.prototype.search=function(f,h,g,c,e){void 0===g&&(g=0);void 0===c&&(c=[]);if(g>=this.keyservers.length){if(0===c.length)return h(null,
e||404);for(var b={},n=0;n<c.length;n++)if(e=c[n],void 0!==b[e.keyid])for(var p=0;p<e.uids.length;p++){for(var q=!1,u=0;u<b[e.keyid].uids.length;u++)if(b[e.keyid].uids[u].uid===e.uids[p]){q=!0;break}q||b[e.keyid].uids.push(e.uids[p])}else b[e.keyid]=e;p=[];for(n=0;n<c.length;n++)e=c[n],void 0!==b[e.keyid]&&(p.push(b[e.keyid]),delete b[e.keyid]);return h(p,null)}var t=this.keyservers[g],r=this;if(0===t.indexOf("https://keybase.io/")){var l=new XMLHttpRequest;l.open("get","https://keybase.io/_/api/1.0/user/autocomplete.json?q="+
encodeURIComponent(f));l.onload=function(){if(200===l.status){var b=JSON.parse(l.responseText);if(0!==b.status.code)return r.search(f,h,g+1,c,b.status.code);if(0===b.completions.length)return r.search(f,h,g+1,c,404);for(var e=[],m=0;m<b.completions.length;m++){var a=b.completions[m].components;if(void 0!==a.key_fingerprint){var k={keyid:a.key_fingerprint.val.toUpperCase(),href:"https://keybase.io/"+a.username.val+"/key.asc",info:"https://keybase.io/"+a.username.val,algo:a.key_fingerprint.algo,keylen:a.key_fingerprint.nbits,
creationdate:null,expirationdate:null,revoked:!1,disabled:!1,expired:!1,uids:[{uid:a.username.val+" on Keybase <https://keybase.io/"+a.username.val+">",creationdate:null,expirationdate:null,revoked:!1,disabled:!1,expired:!1}]};void 0!==a.full_name&&k.uids.push({uid:"Full Name: "+a.full_name.val,creationdate:null,expirationdate:null,revoked:!1,disabled:!1,expired:!1});void 0!==a.twitter&&k.uids.push({uid:a.twitter.val+" on Twitter <https://twitter.com/"+a.twitter.val+">",creationdate:null,expirationdate:null,
revoked:!1,disabled:!1,expired:!1});void 0!==a.github&&k.uids.push({uid:a.github.val+" on Github <https://github.com/"+a.github.val+">",creationdate:null,expirationdate:null,revoked:!1,disabled:!1,expired:!1});void 0!==a.reddit&&k.uids.push({uid:a.reddit.val+" on Github <https://reddit.com/u/"+a.reddit.val+">",creationdate:null,expirationdate:null,revoked:!1,disabled:!1,expired:!1});void 0!==a.hackernews&&k.uids.push({uid:a.hackernews.val+" on Hacker News <https://news.ycombinator.com/user?id="+a.hackernews.val+
">",creationdate:null,expirationdate:null,revoked:!1,disabled:!1,expired:!1});void 0!==a.coinbase&&k.uids.push({uid:a.coinbase.val+" on Coinbase <https://www.coinbase.com/"+a.coinbase.val+">",creationdate:null,expirationdate:null,revoked:!1,disabled:!1,expired:!1});if(void 0!==a.websites)for(var d=0;d<a.websites.length;d++)k.uids.push({uid:"Owns "+a.websites[d].val,creationdate:null,expirationdate:null,revoked:!1,disabled:!1,expired:!1});e.push(k)}}c=c.concat(e);return r.search(f,h,g+1,c,null)}return r.search(f,
h,g+1,c,l.status)}}else l=new XMLHttpRequest,l.open("get",t+"pks/lookup?op=index&options=mr&fingerprint=on&search="+encodeURIComponent(f)),l.onload=function(){if(200===l.status){for(var b=[],e=l.responseText.split("\n"),m=void 0,a=0;a<e.length;a++){var k=e[a].trim();if(0==k.indexOf("pub:")){void 0!==m&&b.push(m);var d=k.split(":");m={keyid:d[1],href:t+"pks/lookup?op=get&options=mr&search=0x"+d[1],info:t+"pks/lookup?op=vindex&search=0x"+d[1],algo:""===d[2]?null:parseInt(d[2]),keylen:""===d[3]?null:
parseInt(d[3]),creationdate:""===d[4]?null:parseInt(d[4]),expirationdate:""===d[5]?null:parseInt(d[5]),revoked:-1!==d[6].indexOf("r"),disabled:-1!==d[6].indexOf("d"),expired:-1!==d[6].indexOf("e"),uids:[]}}0==k.indexOf("uid:")&&(d=k.split(":"),m.uids.push({uid:decodeURIComponent(d[1]),creationdate:""===d[2]?null:parseInt(d[2]),expirationdate:""===d[3]?null:parseInt(d[3]),revoked:-1!==d[4].indexOf("r"),disabled:-1!==d[4].indexOf("d"),expired:-1!==d[4].indexOf("e")}))}b.push(m);c=c.concat(b);return r.search(f,
h,g+1,c,null)}return r.search(f,h,g+1,c,l.status)};l.send()};v.PublicKey=q})("undefined"===typeof exports?this:exports);
